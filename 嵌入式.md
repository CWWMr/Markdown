---


---

<h1 id="嵌入式开发"><span class="prefix"></span><span class="content">嵌入式开发</span><span class="suffix"></span></h1>
<ul>
<li>
<p>配置时钟</p>
</li>
<li>
<p>配置GPIO，UART等相关配置</p>
</li>
<li>
<p>生成工程</p>
</li>
<li>
<p>编辑代码开发</p>
</li>
<li>
<p>flashdown程序下载（reset and run）</p>
</li>
<li>
<p><strong>晶振的选择一般选择外部晶振</strong></p>
</li>
</ul>
<h1 id="串口发送接收"><span class="prefix"></span><span class="content">串口发送接收</span><span class="suffix"></span></h1>
<hr>
<ul>
<li>
<p>同步发送接收</p>
<ul>
<li>接收返回值OK、BUSY…</li>
<li>对方发多少，并知道时间</li>
</ul>
</li>
<li>
<p>中断接收Receive_IT()</p>
<ul>
<li>
<p>接收到一个之后直接进中断，开始接收，收完成以后告诉我</p>
<blockquote>
<p>什么时候接收完成？接收完成之后会进行回调（<em>多个中断调用一个回调函数，需要先进行判断</em>）</p>
<p>weak 弱函数，用户定义后进行覆盖</p>
<p>volatile 全局变量，取最新值而非缓存值</p>
</blockquote>
</li>
<li>
<p>使能USART1的中断NVIC</p>
<blockquote>
<p>call HAL hangdler(直接写回调函数就行)</p>
<p>系统级中断函数stm32f1xx_it.c</p>
</blockquote>
</li>
</ul>
</li>
<li>
<p>DMA接收receive_DMA()</p>
<blockquote>
<p>直接存储访问，存储完成后通知CPU就行，不会每次都进入中断</p>
<p>配置UART MDA中断接收</p>
<p><strong>基本和中断接收一样，都是进入中断之后调用中断回调函数，通知CPU接收数据完毕</strong> ，<strong>基本一样，直接修改函数是DMA()即可</strong></p>
</blockquote>
</li>
<li>
<p>IDLE接收receive_IDLE()</p>
<blockquote>
<p>接收长度不可知，变长接收</p>
<p>空闲检测，通过中断告知，可以对已经接收的数据就行处理或者不进行处理</p>
</blockquote>
</li>
</ul>
<h1 id="日志系统"><span class="prefix"></span><span class="content">日志系统</span><span class="suffix"></span></h1>
<h2 id="故障异常信息收集"><span class="prefix"></span><span class="content">故障异常信息收集</span><span class="suffix"></span></h2>
<p>存储系统运行信息</p>
<blockquote>
<p>分级，过滤功能</p>
<p>easylogger</p>
</blockquote>
<h2 id="printf函数重定向"><span class="prefix"></span><span class="content">printf()函数重定向</span><span class="suffix"></span></h2>
<blockquote>
<p>配置keil</p>
<p>包含头文件</p>
<p>编写重定向函数fputc()</p>
</blockquote>
<p><img alt="image-20251113204458001" src=""></p>
<h2 id="easylogger日志系统移植"><span class="prefix"></span><span class="content">easylogger日志系统移植</span><span class="suffix"></span></h2>
<blockquote>
<p>将源码添加到项目工程中</p>
<p>实现对应的接口函数</p>
</blockquote>
<h3 id="移植"><span class="prefix"></span><span class="content">移植</span><span class="suffix"></span></h3>
<blockquote>
<p>阅读目录结构</p>
<ul>
<li>dev-sidecar访问GitHub，npm</li>
</ul>
<p>1.下载源码</p>
<p>2.导入项目</p>
<p>3.移植接口函数</p>
<pre><code>void elog_port_output(const char *log, size_t size) {

printf("%.*s", size, log);

}
</code></pre>
<p>4.参数配置</p>
<blockquote>
<p><em><strong>换行设置\r\n</strong></em></p>
<p>elog_set_fmt(<strong>ELOG_LVL_ERROR</strong>, ELOG_FMT_LVL <em>(级别)</em>| ELOG_FMT_TAG*(TAG)* | ELOG_FMT_TIME*(时间)*);</p>
</blockquote>
<p>5.demo验证</p>
</blockquote>
<p>遇到问题：</p>
<ul>
<li>
<p>异步线程使能，不用就关掉</p>
</li>
<li>
<p>记得先进行printf重定向到uart1</p>
</li>
<li>
<p>**…\EasyLogger-master\easylogger\port\elog_port.c(115): warning:  #940-D: missing return statement at end of non-void function “elog_port_get_t_info”**警告处理，返回空值就行</p>
</li>
</ul>
<h3 id="编译成功-还没有进行调用"><span class="prefix"></span><span class="content"><strong>编译成功</strong> 还没有进行调用</span><span class="suffix"></span></h3>
<blockquote>
<p>拷贝初始化测试demo完成初始化</p>
<p>接口文件elog.h</p>
<p>调用接口函数实现日志输出</p>
</blockquote>

